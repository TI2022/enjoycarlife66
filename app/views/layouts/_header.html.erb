<header class='header'>
  <div class='row'>
    <div id="logo">
      <%= link_to image_tag("logo1.jpg"), root_path, id: 'logo' %>
    </div>
    <ul class="header-user-buttons">
      <li>
        <div class="btn-group">
          <button type="button" class="btn btn-sm btn-outline-dark dropdown-toggle"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <% if user_signed_in? %>
              ● <%= current_user.name %> さん
            <% else %>
              ○ お客様ログイン
            <% end %>
          </button>
          <div class="dropdown-menu">
            <% if user_signed_in? %>
              <%= link_to 'マイページ', users_account_path(current_user.id), class: 'dropdown-item' %>
              <%= link_to 'ご予約ページ', reservations_path, class: 'dropdown-item', 'data-turbolinks': false %>
              <div class="dropdown-divider"></div>
              <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: 'dropdown-item' %>
            <% else %>
              <%= link_to 'ログイン', new_user_session_path, class: 'dropdown-item' %>
              <%= link_to '新規登録', new_user_registration_path, class: 'dropdown-item' %>
            <% end %>
          </div>
        </div>
      </li>
      <li>
        <% if !user_signed_in? %>
          <%= link_to image_tag('/payment_history.png', width: 30), new_user_session_path %>
          <%= link_to '購入履歴', new_user_session_path, class: "btn btn-sm btn-outline-dark" %>
        <% else %>
          <%= link_to image_tag('/payment_history.png', width: 30), payments_path(current_user) %>
          <%= link_to '購入履歴', payments_path(current_user), class: "btn btn-sm btn-outline-dark" %>
        <% end %>
      </li>
      <li>
        <% if !user_signed_in? %>
          <%= link_to image_tag('/cart_empty.png', width: 30), new_user_session_path %>
          <%= link_to 'カート', new_user_session_path, class: "btn btn-sm btn-warning" %>
        <% else %>
          <% unpaid_orders = current_user.cart.orders.where(paid_at: nil) %>
          <% unpaid_event_orders = current_user.cart.event_orders.where(paid_at: nil) %>
          <% if unpaid_orders.present? || unpaid_event_orders.present? %>
            <%= link_to image_tag('/cart_items.png', width: 30), carts_path(current_user) %>
          <% else %>
            <%= link_to image_tag('/cart_empty.png', width: 30), carts_path(current_user) %>
          <% end %>
          <%= link_to 'カート', carts_path(current_user), class: "btn btn-sm btn-warning" %>
        <% end %>
      </li>
    </ul>
  </div>

  <div class="row">
    <ul class="header-service-tabs">
      <li><%= link_to '店舗のご案内', stores_path, class: "link" %></li>
      <li><%= link_to 'メニューと料金', treatment_menu_menus_path, class: "link" %></li>
      <li><%= link_to '商品情報', items_path, class: "link" %></li>
      <li><%= link_to 'イベント情報', events_path, class: "link" %></li>
    </ul>
  </div>
</header>
